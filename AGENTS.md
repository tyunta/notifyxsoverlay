AGENTS.md is UTF-8. If mojibake, reopen as UTF-8.

## ドキュメント改善（簡易）
- README: TL;DR / クイックスタート / 設定場所 / トラブルシュートを優先する
- AGENTS: ルールは短く、運用手順とテストコマンドを明記する

## テスト運用（簡易）
- uv run --extra test --with pytest pytest
- カバレッジ確認: uv run --extra test --with pytest-cov pytest --cov=src/notifyxsoverlay --cov-report=term-missing:skip-covered
# NotifyXSOverlay 憲法

## 目的
- Windowsの通知をXSOverlayへ中継し、VR内で確実に視認できるようにする。
- 既存アプリとの差別化として、通知元アプリのフィルタリングを中核機能とする。

## やること
- Windows通知の取得、整形、XSOverlayへの送信を安定動作させる。
- 通知元アプリの許可/拒否フィルタを提供し、ユーザーが安全に制御できるようにする。
- 失敗時はログとリトライ方針を明確化し、静かな失敗を避ける。

## やらないこと
- Windows通知の恒久的な保存やクラウド同期。
- 通知内容の外部送信（ユーザーが明示的に有効化した場合を除く）。
- 必須ではない常駐リソースの肥大化（過剰な常駐UIや無限ループ）。

## 設計原則
- Simple > Easy: 目的に必要な最小構成を優先する。
- 変更は局所化し、既存の通知フローを壊さない。
- フィルタは「安全側」に倒す。迷ったらブロック/抑制を選ぶ。
- 指示がなくても必要なら検索して情報収集する（検索不要の指定がある場合は従う）。
- 根拠優先: 仕様・前提・不変条件を明文化し、検証可能な実装のみを行う。

## README規約
- READMEは「やること / やらないこと / 使い方」を必ず説明する。
- セットアップ手順、前提条件、必要な権限を明記する。
- フィルタ仕様（許可/拒否の優先順位と評価順）を明記する。

## 実装/コード規約
- すべてのテキストはUTF-8（BOMなし）で読み書きする（S-JIS禁止）。
- 文字化けを防ぐため、エディタ/ツールの既定エンコーディングをUTF-8に設定する。
- Pythonを前提とし、`uv`で依存管理/実行する。
- 命名: クラスはPascalCase、関数/変数はsnake_case。
- 4スペースインデント、型ヒントを原則付与する。
- 重い監視ループは避け、イベント/コールバックを優先する。
- ログは構造化し、個人情報の出力を最小化する。

## Git運用
- コミットは適切な粒度で行い、必要に応じて行単位ステージングを使うか判断する。
- コミットメッセージは変更内容が分かる簡潔な文言にする。

## セットアップ制約
- Windows通知APIの権限や設定に依存する場合はREADMEに記載する。
- XSOverlayとの連携は公式手段に従い、必要な設定値は明示する。

## 変更時の最低チェック
- READMEの該当箇所を更新する。
- 実機で「通知が届かない/二重送信/フィルタが効かない」を確認する。

## 変更の自走
- 依頼が無くても、必要だと判断した憲法の修正・追記を行う。
- 変更時は理由を簡潔に記載する。

## 対話の能動化
- 重要な前提/不変条件/運用上の注意が見えたら、促しを待たず随時提示する。
- 合意が取れた内容はREADMEを主に反映し、必要なら該当コードにも短いコメントで残す。
- 既にREADMEへ反映済みの内容は再掲せず、新規論点のみ提示する。
- 選択肢は広く提示し、根拠とトレードオフを明示する。
- 狭める必要がある場合は、狭める理由を明文化する。

## 記録先（合意事項の保存先）
- 仕様/手順/運用: `README.md`（主たる保存先）
- ルール/方針: `AGENTS.md`
- 実装の前提/不変条件/式の意図: 該当ソースの短いコメント

## 優先順位
- 仕様の最終版は `README.md`、運用ルールの最終版は `AGENTS.md` とする。
